$SiteName = $Env:Site_Name
$RelativeFilePath = $Env:Relative_File_Path
$RelativeFilePath = "$SiteName\$RelativeFilePath" -replace '(\\\\|/)', '\'

Write-Host ""
Write-Host "Site Name = $SiteName"
Write-Host "File Path = $RelativeFilePath"
Write-Host ""
  
# Root Destination (IIS) 
$RootDestination = '\\192.168.168.60\d$\VitalAxis\Websites-IIS'

# Source file path (input file parameter)
$SourceFile = "$Env:WORKSPACE\Deploy_File"

# Construct the full destination path
$DestinationDir = "$RootDestination\$RelativeFilePath"

# Check if the parent directory exists, create it if not
if (-Not (Test-Path -Path $(Split-Path $DestinationDir -Parent))) {
    New-Item -Path $(Split-Path $DestinationDir -Parent) -ItemType Directory -Force
}

# Copy the file to the destination directory
Copy-Item -Path $SourceFile -Destination $DestinationDir -Force

Write-Host ""
Write-Host "File has been deployed to '$RelativeFilePath'."
####################Full For reference#######################
Skip to content
[Jenkins]Jenkins
Search (CTRL+K)
4
2
Udaykumar T

log out
Dashboard
TITAN
QC
File_Deployment
TITAN-QC-FILE-DEPLOY
Configuration
Configure

General

Source Code Management

Build Triggers

Build Environment

Build Steps

Post-build Actions

General

Description
Upload JS/Report/Static files to Titan QC URLs
Plain text
Preview

Enable project-based security

Discard old builds
?
GitLab Connection


Use alternative credential

This project is parameterized
?
File Parameter
?

File location
?
Deploy_File
Description
?
File to Deploy
Plain text
Preview
File system objects list Parameter
?

Name
?
Site_Name
Description
?
Plain text
Preview
NodeName

master
Path
?
\\192.168.168.60\d$\VitalAxis\Websites-IIS
Filesystem object type
?

DIRECTORY
Form select type

SINGLE_SELECT
Default Value (Only one value supported, yet.)
?
Include Pattern
?
^TITAN-QC-.*
Exclude Pattern
?

Sort by last modified date
?

Sort in reverse order
?

Include path in value
?
String Parameter
?

Name
?
Relative_File_Path
Default Value
?
Description
?
Example 1: JS/Menu.js
Example 2: \Config\ReportTemplates\Standard\Report.xml
Example 3: \V6.87\050820240248\JS\Menu050820240248.js
Plain text
Preview

Trim the string
?
Add Parameter

Throttle builds
?

Prepare an environment for the run
?
Job config history change message
?

Execute concurrent builds if necessary
?
JDK
JDK to be used for this project

JDK 11

Restrict where this project can be run
?
Advanced
Source Code Management
None
Git
?
Build Triggers

Trigger builds remotely (e.g., from scripts)
?

Build after other projects are built
?

Build periodically
?

Build when a change is pushed to GitLab. GitLab webhook URL: http://192.168.168.129:8080/project/TITAN/QC/File_Deployment/TITAN-QC-FILE-DEPLOY
?

Enable Artifactory trigger

Poll SCM
?
Build Environment

Delete workspace before build starts

Mask passwords and regexes (and enable global passwords)
?

Use secret text(s) or file(s)
?

Provide Configuration files
?

Add timestamps to the Console Output

Ant/Ivy-Artifactory Integration

Bind file parameter
?

Generic-Artifactory Integration

Gradle-Artifactory Integration

Inject environment variables to the build process
?

Inject passwords to the build as environment variables

Inspect build log for published build scans

Maven3-Artifactory Integration

Set jenkins user build variables
?

With Ant
?
Build Steps
PowerShell
?

Command
See the list of available environment variables
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
$SiteName = $Env:Site_Name
$RelativeFilePath = $Env:Relative_File_Path
$RelativeFilePath = "$SiteName\$RelativeFilePath" -replace '(\\\\|/)', '\'
 
Write-Host ""
Write-Host "Site Name = $SiteName"
Write-Host "File Path = $RelativeFilePath"
Write-Host ""
  
# Root Destination (IIS) 
$RootDestination = '\\192.168.168.60\d$\VitalAxis\Websites-IIS'
 
# Source file path (input file parameter)
$SourceFile = "$Env:WORKSPACE\Deploy_File"
 
# Construct the full destination path
$DestinationDir = "$RootDestination\$RelativeFilePath"
 
# Check if the parent directory exists, create it if not
if (-Not (Test-Path -Path $(Split-Path $DestinationDir -Parent))) {
    New-Item -Path $(Split-Path $DestinationDir -Parent) -ItemType Directory -Force
}
 
# Copy the file to the destination directory
Copy-Item -Path $SourceFile -Destination $DestinationDir -Force
 
Write-Host ""
Write-Host "File has been deployed to '$RelativeFilePath'."
 

Stop On Errors
?

Use PowerShell profile
?
Advanced
Add build step
Post-build Actions
Add post-build action
Save
Apply
REST API
Jenkins 2.452.1
